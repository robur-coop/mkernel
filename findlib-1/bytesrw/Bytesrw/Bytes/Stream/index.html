<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stream (docs.findlib-1.bytesrw.Bytesrw.Bytes.Stream)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">Index</a> &#x00BB; <a href="../../../../../index.html">docs</a> &#x00BB; <a href="../../../../index.html">findlib-1</a> &#x00BB; <a href="../../../index.html">bytesrw</a> &#x00BB; <a href="../../index.html">Bytesrw</a> &#x00BB; <a href="../index.html">Bytes</a> &#x00BB; Stream</nav><header class="odoc-preamble"><h1>Module <code><span>Bytes.Stream</span></code></h1><p>Byte streams.</p><p>Byte streams are sequences of non-empty <a href="../Slice/index.html" title="Slice">byte slices</a> ended by a single <a href="../Slice/index.html#val-eod"><code>Slice.eod</code></a> slice. They have no concrete incarnation, they are observed by <a href="../Reader/index.html"><code>Bytes.Reader</code></a>s and <a href="../Writer/index.html"><code>Bytes.Writer</code></a>s.</p><p>See the <span class="xref-unresolved" title="index.quick">quick start</span> and read more about streams in the <span class="xref-unresolved" title="tutorial.streams">tutorial</span>.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#positions">Positions</a></li><li><a href="#formats">Formats</a></li><li><a href="#errors">Errors</a></li><li><a href="#limits">Limits</a></li></ul></nav></div><div class="odoc-content"><h2 id="positions"><a href="#positions" class="anchor"></a>Positions</h2><div class="odoc-spec"><div class="spec type anchored" id="type-pos"><a href="#type-pos" class="anchor"></a><code><span><span class="keyword">type</span> pos</span><span> = int</span></code></div><div class="spec-doc"><p>The type for stream positions.</p><p>The position of a stream is the zero-based byte index of the next byte to read or write. It can also be seen as the count of bytes read or written by a stream reader or writer.</p></div></div><h2 id="formats"><a href="#formats" class="anchor"></a>Formats</h2><div class="odoc-spec"><div class="spec type anchored" id="type-format"><a href="#type-format" class="anchor"></a><code><span><span class="keyword">type</span> format</span><span> = string</span></code></div><div class="spec-doc"><p>The type for stream formats. An identifier for the format of read or written bytes. Favour mime types or lowercased file extensions without the dot.</p></div></div><h2 id="errors"><a href="#errors" class="anchor"></a>Errors</h2><p>Read more about errors in the <span class="xref-unresolved" title="tutorial.errors">tutorial</span>.</p><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>The type for stream errors. Stream formats add their own cases to this type. See <span class="xref-unresolved" title="cookbook.errors">an example</span>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-error_context"><a href="#type-error_context" class="anchor"></a><code><span><span class="keyword">type</span> error_context</span></code></div><div class="spec-doc"><p>The type for error contexts.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span> <span class="keyword">of</span> <a href="#type-error">error</a> * <a href="#type-error_context">error_context</a></span></code></div><div class="spec-doc"><p>The exception raised by streams reader, writers and their creation functions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_message"><a href="#val-error_message" class="anchor"></a><code><span><span class="keyword">val</span> error_message : <span><span>(<a href="#type-error">error</a> * <a href="#type-error_context">error_context</a>)</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>error_message e</code> turns error <code>e</code> into an error message for humans.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_to_result"><a href="#val-error_to_result" class="anchor"></a><code><span><span class="keyword">val</span> error_to_result : <span><span>(<a href="#type-error">error</a> * <a href="#type-error_context">error_context</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, string)</span> <a href="../../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>error_to_result e</code> is <code>Result.Error (error_message e)</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-format_error"><a href="#type-format_error" class="anchor"></a><code><span><span class="keyword">type</span> <span>'e format_error</span></span></code></div><div class="spec-doc"><p>The type for describing errors of type <code>'e</code> for a stream format.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_format_error"><a href="#val-make_format_error" class="anchor"></a><code><span><span class="keyword">val</span> make_format_error : 
  <span><span class="label">format</span>:<a href="#type-format">format</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">case</span>:<span>(<span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-error">error</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">message</span>:<span>(<span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'e</span> <a href="#type-format_error">format_error</a></span></span></code></div><div class="spec-doc"><p><code>make_format_error ~format ~case ~message</code> describes the type of error for format <code>format</code>:</p><ul><li><code>format</code> identifies the stream <a href="#type-format"><code>format</code></a>.</li><li><code>case</code> is the function that injects the type into <a href="#type-error"><code>error</code></a>.</li><li><code>message</code> is a function that must stringify the results of <code>case</code>.</li></ul><p>See <span class="xref-unresolved" title="cookbook.errors">an example</span>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <span><span><span class="type-var">'e</span> <a href="#type-format_error">format_error</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?context</span>:<span>[ `R <span>| `W</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>error fmt e</code> errors with <code>e</code> for a stream <code>fmt</code> by raising an <a href="#exception-Error"><code>Error</code></a> exception.</p></div></div><h2 id="limits"><a href="#limits" class="anchor"></a>Limits</h2><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Limit"><a href="#extension-decl-Limit" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += </span></code><ol><li id="extension-Limit" class="def variant extension anchored"><a href="#extension-Limit" class="anchor"></a><code><span>| </span><span><span class="extension">Limit</span> <span class="keyword">of</span> int</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The inclusive byte count limit.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>The type for stream limits errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-limit_error"><a href="#val-limit_error" class="anchor"></a><code><span><span class="keyword">val</span> limit_error : <span>int <a href="#type-format_error">format_error</a></span></span></code></div><div class="spec-doc"><p><code>limit_error</code> is a stream limit error.</p></div></div></div></body></html>
