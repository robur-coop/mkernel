<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Json (docs.findlib-1.jsont.Jsont.Json)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">findlib-1</a> &#x00BB; <a href="../../index.html">jsont</a> &#x00BB; <a href="../index.html">Jsont</a> &#x00BB; Json</nav><header class="odoc-preamble"><h1>Module <code><span>Jsont.Json</span></code></h1><p>Generic JSON values.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#json">JSON values</a><ul><li><a href="#null">Nulls and options</a></li><li><a href="#bool">Booleans</a></li><li><a href="#numbers">Numbers</a></li><li><a href="#strings">Strings</a></li><li><a href="#arrays">Arrays</a></li><li><a href="#objects">Objects</a></li></ul></li><li><a href="#decode">Decode</a></li><li><a href="#encode">Encode</a></li><li><a href="#recode">Recode</a></li><li><a href="#errors">Errors</a></li></ul></nav></div><div class="odoc-content"><h2 id="json"><a href="#json" class="anchor"></a>JSON values</h2><div class="odoc-spec"><div class="spec type subst anchored" id="type-jsont"><a href="#type-jsont" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a jsont</span></span><span> := <span><span class="type-var">'a</span> <a href="../index.html#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cons"><a href="#type-cons" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a cons</span></span><span> = <span><span class="optlabel">?meta</span>:<a href="../Meta/index.html#type-t">Meta.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-json">json</a></span></code></div><div class="spec-doc"><p>The type for constructing JSON values from an OCaml value of type <code>'a</code>. <code>meta</code> defaults to <a href="../Meta/index.html#val-none"><code>Meta.none</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../index.html#type-json">json</a></span></code></div><div class="spec-doc"><p>See <a href="../index.html#val-json"><code>Jsont.json</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-meta"><a href="#val-meta" class="anchor"></a><code><span><span class="keyword">val</span> meta : <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Meta/index.html#type-t">Meta.t</a></span></code></div><div class="spec-doc"><p><code>meta v</code> is the metadata of value <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_meta"><a href="#val-set_meta" class="anchor"></a><code><span><span class="keyword">val</span> set_meta : <span><a href="../Meta/index.html#type-t">Meta.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-json">json</a></span></code></div><div class="spec-doc"><p><code>set_meta m v</code> replaces <code>v</code>'s meta with <code>m</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy_layout"><a href="#val-copy_layout" class="anchor"></a><code><span><span class="keyword">val</span> copy_layout : <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dst</span>:<a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-json">json</a></span></code></div><div class="spec-doc"><p><code>copy_layout src ~dst</code> copies the layout of <code>src</code> and sets it on <code>dst</code> using <a href="../Meta/index.html#val-copy_ws"><code>Meta.copy_ws</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sort"><a href="#val-sort" class="anchor"></a><code><span><span class="keyword">val</span> sort : <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Sort/index.html#type-t">Sort.t</a></span></code></div><div class="spec-doc"><p><code>sort v</code> is the sort of value <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span><span class="keyword">val</span> zero : <span><a href="../index.html#type-json">json</a> <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>zero j</code> is a stub value of the sort value of <code>j</code>. The stub value is the “natural” zero: null, false, 0, empty string, empty array, empty object.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal j0 j1</code> is <a href="#val-compare"><code>compare</code></a><code> j0 j1 = 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare j0 j1</code> is a total order on JSON values:</p><ul><li>Floating point values are compared with <a href="../../../../stdlib/Stdlib/Float/index.html#val-compare"><code>Float.compare</code></a>, this means NaN values are equal.</li><li>Strings are compared byte wise.</li><li>Objects members are sorted before being compared.</li><li><a href="../Meta/index.html#type-t"><code>Meta.t</code></a> values are ignored.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="#type-t">t</a> <a href="../index.html#type-fmt">fmt</a></span></span></code></div><div class="spec-doc"><p>See <a href="../index.html#val-pp_json"><code>Jsont.pp_json</code></a>.</p></div></div><h3 id="null"><a href="#null" class="anchor"></a>Nulls and options</h3><div class="odoc-spec"><div class="spec value anchored" id="val-null"><a href="#val-null" class="anchor"></a><code><span><span class="keyword">val</span> null : <span>unit <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>null</code> is <code>Null (unit, meta)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-cons">cons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>option c</code> constructs <code>Some v</code> values with <code>c v</code> and <code>None</code> ones with <a href="#val-null"><code>null</code></a>.</p></div></div><h3 id="bool"><a href="#bool" class="anchor"></a>Booleans</h3><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>bool b</code> is <code>Bool (b, meta)</code>.</p></div></div><h3 id="numbers"><a href="#numbers" class="anchor"></a>Numbers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-number"><a href="#val-number" class="anchor"></a><code><span><span class="keyword">val</span> number : <span>float <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>number n</code> is <code>Number (n, meta)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-any_float"><a href="#val-any_float" class="anchor"></a><code><span><span class="keyword">val</span> any_float : <span>float <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>any_float v</code> is <code>number v</code> if <a href="../../../../stdlib/Stdlib/Float/index.html#val-is_finite"><code>Float.is_finite</code></a><code> v</code> is <code>true</code> and <code>string (Float.to_string v)</code> otherwise. See <a href="../index.html#val-any_float"><code>Jsont.any_float</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>int32 <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>int32</code> is <code>i</code> as a JSON number.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>int64 i</code> is <code>i</code> as a JSON number or a JSON string if not in the range [-2<sup>53</sup>;2<sup>53</sup>]. See also <a href="#val-int64_as_string"><code>int64_as_string</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64_as_string"><a href="#val-int64_as_string" class="anchor"></a><code><span><span class="keyword">val</span> int64_as_string : <span>int64 <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>int64_as_string i</code> is <code>i</code> as a JSON string. See also <a href="#val-int64"><code>int64</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>int</code> is <code>i</code> as a JSON number or a JSON string if not in the range [-2<sup>53</sup>;2<sup>53</sup>]. See also <a href="#val-int_as_string"><code>int_as_string</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int_as_string"><a href="#val-int_as_string" class="anchor"></a><code><span><span class="keyword">val</span> int_as_string : <span>int <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>int_as_string i</code> is <code>i</code> as a JSON string. See also <a href="#val-int"><code>int</code></a>.</p></div></div><h3 id="strings"><a href="#strings" class="anchor"></a>Strings</h3><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>string s</code> is <code>String (s, meta)</code>.</p></div></div><h3 id="arrays"><a href="#arrays" class="anchor"></a>Arrays</h3><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><a href="../index.html#type-json">json</a> list</span> <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>list l</code> is <code>Array (l, meta)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><a href="../index.html#type-json">json</a> array</span> <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>array l</code> is <code>Array (Array.to_list a, meta)</code>. See also <a href="#val-list"><code>list</code></a>.</p></div></div><h3 id="objects"><a href="#objects" class="anchor"></a>Objects</h3><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span class="optlabel">?meta</span>:<a href="../Meta/index.html#type-t">Meta.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-name">name</a></span></code></div><div class="spec-doc"><p><code>name ?meta n</code> is <code>(n, meta)</code>. <code>meta</code> defaults to <a href="../Meta/index.html#val-none"><code>Meta.none</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><a href="../index.html#type-name">name</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-mem">mem</a></span></code></div><div class="spec-doc"><p><code>mem n v</code> is <code>(n, v)</code>. <code>meta</code> defaults to <a href="../Meta/index.html#val-none"><code>Meta.none</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-object'"><a href="#val-object'" class="anchor"></a><code><span><span class="keyword">val</span> object' : <span><a href="../index.html#type-object'">object'</a> <a href="#type-cons">cons</a></span></span></code></div><div class="spec-doc"><p><code>object o</code> is <code>Object (o, meta)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_mem"><a href="#val-find_mem" class="anchor"></a><code><span><span class="keyword">val</span> find_mem : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-object'">object'</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-mem">mem</a> option</span></span></code></div><div class="spec-doc"><p><code>find_mem n ms</code> find the first member whose name matches <code>n</code> in <code>ms</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_mem'"><a href="#val-find_mem'" class="anchor"></a><code><span><span class="keyword">val</span> find_mem' : <span><a href="../index.html#type-name">name</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-object'">object'</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-mem">mem</a> option</span></span></code></div><div class="spec-doc"><p><code>find_mem n ms</code> is <code>find_mem (fst n) ms</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-object_names"><a href="#val-object_names" class="anchor"></a><code><span><span class="keyword">val</span> object_names : <span><a href="../index.html#type-object'">object'</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>object_names ms</code> are the names of <code>ms</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-object_names'"><a href="#val-object_names'" class="anchor"></a><code><span><span class="keyword">val</span> object_names' : <span><a href="../index.html#type-object'">object'</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-name">name</a> list</span></span></code></div><div class="spec-doc"><p><code>object_names ms</code> are the names of <code>ms</code>.</p></div></div><h2 id="decode"><a href="#decode" class="anchor"></a>Decode</h2><div class="odoc-spec"><div class="spec value anchored" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span><span class="keyword">val</span> decode : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, string)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>decode t j</code> decodes a value from the generic JSON <code>j</code> according to type <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode'"><a href="#val-decode'" class="anchor"></a><code><span><span class="keyword">val</span> decode' : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <a href="../Error/index.html#type-t">Error.t</a>)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>decode'</code> is like <a href="#val-decode"><code>decode</code></a> but preserves the error structure.</p></div></div><h2 id="encode"><a href="#encode" class="anchor"></a>Encode</h2><div class="odoc-spec"><div class="spec value anchored" id="val-encode"><a href="#val-encode" class="anchor"></a><code><span><span class="keyword">val</span> encode : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../index.html#type-json">json</a>, string)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>encode t v</code> encodes a generic JSON value for <code>v</code> according to type <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encode'"><a href="#val-encode'" class="anchor"></a><code><span><span class="keyword">val</span> encode' : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../index.html#type-json">json</a>, <a href="../Error/index.html#type-t">Error.t</a>)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>encode'</code> is like <a href="#val-encode"><code>encode</code></a> but preserves the error structure.</p></div></div><h2 id="recode"><a href="#recode" class="anchor"></a>Recode</h2><div class="odoc-spec"><div class="spec value anchored" id="val-recode"><a href="#val-recode" class="anchor"></a><code><span><span class="keyword">val</span> recode : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../index.html#type-json">json</a>, string)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>recode t v</code> decodes <code>v</code> with <code>t</code> and encodes it with <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-recode'"><a href="#val-recode'" class="anchor"></a><code><span><span class="keyword">val</span> recode' : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../index.html#type-json">json</a>, <a href="../Error/index.html#type-t">Error.t</a>)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>recode'</code> is like <a href="#val-recode"><code>recode</code></a> but preserves the error structure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-json">json</a></span></code></div><div class="spec-doc"><p><code>update</code> is like <a href="#val-recode"><code>recode</code></a> but raises <a href="../index.html#exception-Error"><code>Jsont.Error</code></a>.</p></div></div><h2 id="errors"><a href="#errors" class="anchor"></a>Errors</h2><div class="odoc-spec"><div class="spec value anchored" id="val-error_sort"><a href="#val-error_sort" class="anchor"></a><code><span><span class="keyword">val</span> error_sort : <span><span class="label">exp</span>:<a href="../Sort/index.html#type-t">Sort.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>error_sort ~exp fnd</code> errors when sort <code>exp</code> was expected but generic JSON <code>fnd</code> was found.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_type"><a href="#val-error_type" class="anchor"></a><code><span><span class="keyword">val</span> error_type : <span><span><span class="type-var">'a</span> <a href="#type-jsont">jsont</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-json">json</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>error_type t fnd</code> errors when the type expected by <code>t</code> does not match <code>fnd</code>.</p></div></div></div></body></html>
