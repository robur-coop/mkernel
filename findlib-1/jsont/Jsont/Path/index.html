<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Path (docs.findlib-1.jsont.Jsont.Path)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">findlib-1</a> &#x00BB; <a href="../../index.html">jsont</a> &#x00BB; <a href="../index.html">Jsont</a> &#x00BB; Path</nav><header class="odoc-preamble"><h1>Module <code><span>Jsont.Path</span></code></h1><p>JSON paths.</p><p>Paths are used for keeping track of erroring <a href="../Error/Context/index.html#type-t" title="Error.Context.t">contexts</a> and for specifying <a href="../index.html#queries" title="queries">query and update</a> locations.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#indices">Indices</a></li><li><a href="#path">Paths</a></li><li><a href="#path_syntax">Path syntax</a></li></ul></nav></div><div class="odoc-content"><h2 id="indices"><a href="#indices" class="anchor"></a>Indices</h2><div class="odoc-spec"><div class="spec type anchored" id="type-index"><a href="#type-index" class="anchor"></a><code><span><span class="keyword">type</span> index</span><span> = </span></code><ol><li id="type-index.Mem" class="def variant constructor anchored"><a href="#type-index.Mem" class="anchor"></a><code><span>| </span><span><span class="constructor">Mem</span> <span class="keyword">of</span> <span>string <a href="../index.html#type-node">node</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Indexes the value of the member <code>n</code> of an object.</p><span class="comment-delim">*)</span></div></li><li id="type-index.Nth" class="def variant constructor anchored"><a href="#type-index.Nth" class="anchor"></a><code><span>| </span><span><span class="constructor">Nth</span> <span class="keyword">of</span> <span>int <a href="../index.html#type-node">node</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Indexes the value of the <code>n</code>th element of an array.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>The type for indexing operations on JSON values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_index"><a href="#val-pp_index" class="anchor"></a><code><span><span class="keyword">val</span> pp_index : <span><a href="#type-index">index</a> <a href="../index.html#type-fmt">fmt</a></span></span></code></div><div class="spec-doc"><p><code>pp_index</code> formats indexes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_index_trace"><a href="#val-pp_index_trace" class="anchor"></a><code><span><span class="keyword">val</span> pp_index_trace : <span><a href="#type-index">index</a> <a href="../index.html#type-fmt">fmt</a></span></span></code></div><div class="spec-doc"><p><code>pp_index</code> formats indexes and their location.</p></div></div><h2 id="path"><a href="#path" class="anchor"></a>Paths</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for paths, a sequence of indexing operations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-root"><a href="#val-root" class="anchor"></a><code><span><span class="keyword">val</span> root : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>root</code> is the root path.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_root"><a href="#val-is_root" class="anchor"></a><code><span><span class="keyword">val</span> is_root : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_root p</code> is <code>true</code> iff <code>p</code> is the root path.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nth"><a href="#val-nth" class="anchor"></a><code><span><span class="keyword">val</span> nth : <span><span class="optlabel">?meta</span>:<a href="../Meta/index.html#type-t">Meta.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>nth n p</code> indexes the array indexed by <code>p</code> at index <code>n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><span class="optlabel">?meta</span>:<a href="../Meta/index.html#type-t">Meta.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mem n p</code> indexes the object indexed by <code>p</code> at member <code>n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rev_indices"><a href="#val-rev_indices" class="anchor"></a><code><span><span class="keyword">val</span> rev_indices : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-index">index</a> list</span></span></code></div><div class="spec-doc"><p><code>rev_indices p</code> are the indices of <code>p</code> in reverse order, the last indexing operation appears first.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a>, string)</span> <a href="../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>of_string s</code> parses a path according to the <a href="#path_syntax" title="path_syntax">path syntax</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="#type-t">t</a> <a href="../index.html#type-fmt">fmt</a></span></span></code></div><div class="spec-doc"><p><code>pp</code> formats paths.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_trace"><a href="#val-pp_trace" class="anchor"></a><code><span><span class="keyword">val</span> pp_trace : <span><a href="#type-t">t</a> <a href="../index.html#type-fmt">fmt</a></span></span></code></div><div class="spec-doc"><p><code>pp_trace</code> formats paths as a stack trace, if not empty.</p></div></div><h2 id="path_syntax"><a href="#path_syntax" class="anchor"></a>Path syntax</h2><p>Path provide a way for end users to address JSON and edit locations.</p><p>A <em>path</em> is a sequence of member and list indexing operations. Applying the path to a JSON value leads to either a JSON value, or nothing if one of the indices does not exist, or an error if ones tries to index a non-indexable value.</p><p>Here are a few examples of paths.</p><pre class="language-json"><code>  {
    &quot;ocaml&quot;: {
      &quot;libs&quot;: [&quot;jsont&quot;, &quot;brr&quot;, &quot;cmdliner&quot;]
    }
  }</code></pre><pre class="language-shell"><code>ocaml.libs        # value of member &quot;libs&quot; of member &quot;ocaml&quot;
ocaml.libs.[0]    # first element of member &quot;libs&quot; of member &quot;ocaml&quot;</code></pre><p>More formally a <em>path</em> is a <code>.</code> seperated list of indices. An <em>index</em> is written <code>[i]</code>. <code>i</code> can a zero-based list index. Or <code>i</code> can be an object member name <code>n</code>. If there is no ambiguity, the surrounding brackets can be dropped.</p><p><b>Notes.</b></p><ul><li>The syntax has no form of quoting at the moment this means key names can't contain, <code>[</code>, <code>]</code>, or start with a number.</li><li>It would be nice to be able to drop the dots in order to be compatible with <a href="https://www.rfc-editor.org/rfc/rfc9535">JSONPath</a> syntax.</li><li>Reintroduce and implement negative indices (they are parsed).</li></ul></div></body></html>
