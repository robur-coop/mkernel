<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hook (docs.local.mkernel.Mkernel.Hook)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">local</a> &#x00BB; <a href="../../index.html">mkernel</a> &#x00BB; <a href="../index.html">Mkernel</a> &#x00BB; Hook</nav><header class="odoc-preamble"><h1>Module <code><span>Mkernel.Hook</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of hooks.</p><p><b>Unlike</b> Miou hooks, Mkernel's hooks only are executed when we perform the <code>yield</code> hypercall. In other words, these hooks only execute when waiting for a new external event.</p><p>Such a hook can be useful for certain computations because the hook is only executed when truly random events occur: the occurrence of external events.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add fn</code> adds a new hook (a function) which will be executed at every new external events.</p><p>A hook <b>cannot</b> interact with the scheduler and, what's more, cannot use the effects associated with Miou. Miou's effects manager is not attached to it. If the given function raises an exception, the hook is <b>deleted</b>. The user can remove the actual hook with <a href="#val-remove"><code>remove</code></a>. It should be noted that if the user attempts to perform a Miou effect, an <code>Effect.Unhandled</code> exception is raised, which results in the hook being removed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>remove h</code> removes the hook <code>h</code>. If <code>h</code> does not belong to the internal state of Mkernel, it raises an exception <code>Invalid_argument</code>.</p></div></div></div></body></html>
